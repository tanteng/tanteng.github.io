<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.55.6" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>left join,inner join区别 &middot; 小谈博客</title>

  
  <link type="text/css" rel="stylesheet" href="https://tanteng.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://tanteng.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://tanteng.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://tanteng.github.io/css/hyde.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://tanteng.github.io/"><h1>小谈博客</h1></a>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://tanteng.github.io/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2019. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>left join,inner join区别</h1>
  <time datetime=2013-11-15T05:53:20Z class="post-date">Fri, Nov 15, 2013</time>
  <p>假设我们有两张表。Table A 是左边的表。Table B 是右边的表。其各有四条记录，其中有两条记录name是相同的，如下所示：让我们看看不同JOIN的不同</p>

<div>
  <table width="222" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col width="86" /> <col width="136" /></colgroup> <tr>
      <td colspan="2" width="222">
        A表
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Monkey
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Spaghetti
      </td>
    </tr>
  </table>
  
  <table width="222" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col width="86" /> <col width="136" /></colgroup> <tr>
      <td colspan="2" width="222">
        B表
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Rutabaga
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Darth Vade
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
  </table>
</div>

<p><strong>1.INNER JOIN</strong></p>

<p>SELECT * FROM TableA <strong>INNER JOIN </strong>TableB ON TableA.name = TableB.name</p>

<div>
  <table width="340" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col span="4" width="85" /></colgroup> <tr>
      <td colspan="4" width="340">
        结果集
      </td>
    </tr>
    
    <tr>
      <td colspan="2">
        (TableA.)
      </td>
      
      <td colspan="2">
        (TableB.)
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
      
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Pirate
      </td>
      
      <td>
        2
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Ninja
      </td>
      
      <td>
        4
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
  </table>
  
  <p>
    <a href="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/c3b352ad0c78690b66f21977f24e58d520120308083932.png" target="_blank" rel="nofollow"><img class="attachment-medium" alt="c3b352ad0c78690b66f21977f24e58d520120308083932" src="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/c3b352ad0c78690b66f21977f24e58d520120308083932.png" width="240" height="158" /></a>
  </p>
</div>

<p>Inner join 产生的结果集中，是A和B的交集。</p>

<div>
  <strong>2.FULL [OUTER] JOIN </strong>
</div>

<div>
  (1)
</div>

<div>
  SELECT * FROM TableA <strong>FULL OUTER JOIN </strong>TableB ON TableA.name = TableB.name
</div>

<div>
  <table width="340" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col span="4" width="85" /></colgroup> <tr>
      <td colspan="4" width="340">
        结果集
      </td>
    </tr>
    
    <tr>
      <td colspan="2">
        (TableA.)
      </td>
      
      <td colspan="2">
        (TableB.)
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
      
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Pirate
      </td>
      
      <td>
        2
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Monkey
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Ninja
      </td>
      
      <td>
        4
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Spaghetti
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
    
    <tr>
      <td>
        null
      </td>
      
      <td>
        null
      </td>
      
      <td>
        1
      </td>
      
      <td>
        Rutabaga
      </td>
    </tr>
    
    <tr>
      <td>
        null
      </td>
      
      <td>
        null
      </td>
      
      <td>
        3
      </td>
      
      <td>
        Darth Vade
      </td>
    </tr>
  </table>
  
  <p>
    <a href="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/ee4109a9d333e9664fe7ecdeb3f3a15420120308094301.png" target="_blank" rel="nofollow"><img class="attachment-medium" alt="ee4109a9d333e9664fe7ecdeb3f3a15420120308094301" src="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/ee4109a9d333e9664fe7ecdeb3f3a15420120308094301.png" width="240" height="158" /></a>
  </p>
</div>

<div>
  Full outer join 产生A和B的并集。但是需要注意的是，对于没有匹配的记录，则会以null做为值。
</div>

<div>
  可以使用IFNULL判断。
</div>

<div>
  (2)
</div>

<div>
  SELECT * FROM TableA<strong> FULL OUTER JOIN</strong> TableB ON TableA.name = TableB.name<br /> <strong>WHERE TableA.id IS null OR TableB.id IS null</strong>
</div>

<div>
  <table width="340" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col span="4" width="85" /></colgroup> <tr>
      <td colspan="4" width="340">
        结果集
      </td>
    </tr>
    
    <tr>
      <td colspan="2">
        (TableA.)
      </td>
      
      <td colspan="2">
        (TableB.)
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
      
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Monkey
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Spaghetti
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
    
    <tr>
      <td>
        null
      </td>
      
      <td>
        null
      </td>
      
      <td>
        1
      </td>
      
      <td>
        Rutabaga
      </td>
    </tr>
    
    <tr>
      <td>
        null
      </td>
      
      <td>
        null
      </td>
      
      <td>
        3
      </td>
      
      <td>
        Darth Vade
      </td>
    </tr>
  </table>
  
  <p>
    <a href="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/0bdf3fe8e48f2e04b335ff13d3388f4920120308094439.png" target="_blank" rel="nofollow"><img class="attachment-medium" alt="0bdf3fe8e48f2e04b335ff13d3388f4920120308094439" src="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/0bdf3fe8e48f2e04b335ff13d3388f4920120308094439.png" width="240" height="158" /></a>
  </p>
</div>

<div>
   产生A表和B表没有交集的数据集。
</div>

<div>
</div>

<div>
  <strong>3.LEFT [OUTER] JOIN</strong>
</div>

<div>
  (1)
</div>

<div>
  SELECT * FROM TableA <strong>LEFT OUTER JOIN </strong>TableB ON TableA.name = TableB.name
</div>

<div>
  <table width="340" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col span="4" width="85" /></colgroup> <tr>
      <td colspan="4" width="340">
        结果集
      </td>
    </tr>
    
    <tr>
      <td colspan="2">
        (TableA.)
      </td>
      
      <td colspan="2">
        (TableB.)
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
      
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Pirate
      </td>
      
      <td>
        2
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Monkey
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Ninja
      </td>
      
      <td>
        4
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Spaghetti
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
  </table>
  
  <p>
    <a href="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/67b3dbc1a300ff4d0b496ff80af9f46f20120308094346.png" target="_blank" rel="nofollow"><img class="attachment-medium" alt="67b3dbc1a300ff4d0b496ff80af9f46f20120308094346" src="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/67b3dbc1a300ff4d0b496ff80af9f46f20120308094346.png" width="240" height="158" /></a>
  </p>
</div>

<div>
  Left outer join 产生表A的完全集，而B表中匹配的则有值，没有匹配的则以null值取代。
</div>

<div>
  (2)
</div>

<div>
  SELECT * FROM TableA <strong>LEFT OUTER JOIN </strong>TableB ON TableA.name = TableB.name <strong>WHERE TableB.id IS null</strong>
</div>

<div>
  <table width="340" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col span="4" width="85" /></colgroup> <tr>
      <td colspan="4" width="340">
        结果集
      </td>
    </tr>
    
    <tr>
      <td colspan="2">
        (TableA.)
      </td>
      
      <td colspan="2">
        (TableB.)
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
      
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Monkey
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Spaghetti
      </td>
      
      <td>
        null
      </td>
      
      <td>
        null
      </td>
    </tr>
  </table>
  
  <p>
    <a href="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/57855b64d364d15ea76c67a156d7cf3d20120308094419.png" target="_blank" rel="nofollow"><img class="attachment-medium" alt="57855b64d364d15ea76c67a156d7cf3d20120308094419" src="http://tanteng-wordpress.stor.sinaapp.com/uploads/2013/11/57855b64d364d15ea76c67a156d7cf3d20120308094419.png" width="240" height="158" /></a>
  </p>
</div>

<p>产生在A表中有而在B表中没有的集合。</p>

<div>
  <strong>4.RIGHT [OUTER] JOIN</strong>
</div>

<div>
  RIGHT OUTER<strong> </strong>JOIN 是后面的表为基础，与LEFT OUTER JOIN用法类似。这里不介绍了。
</div>

<div>
  <strong>5.UNION </strong>与<strong> UNION ALL</strong>
</div>

<div>
  UNION 操作符用于合并两个或多个 SELECT 语句的结果集。<br /> 请注意，UNION 内部的 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相同。UNION 只选取记录，而UNION ALL会列出所有记录。
</div>

<div>
  (1)SELECT name FROM TableA <strong>UNION </strong>SELECT name FROM TableB
</div>

<div>
  <table width="85" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col width="85" /></colgroup> <tr>
      <td width="85">
        新结果集
      </td>
    </tr>
    
    <tr>
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        Monkey
      </td>
    </tr>
    
    <tr>
      <td>
        Ninja
      </td>
    </tr>
    
    <tr>
      <td>
        Spaghetti
      </td>
    </tr>
    
    <tr>
      <td>
        Rutabaga
      </td>
    </tr>
    
    <tr>
      <td>
        Darth Vade
      </td>
    </tr>
  </table>
</div>

<div>
  选取不同值
</div>

<div>
  (2)SELECT name FROM TableA <strong>UNION ALL </strong>SELECT name FROM TableB
</div>

<div>
  <table width="85" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col width="85" /></colgroup> <tr>
      <td width="85">
        新结果集
      </td>
    </tr>
    
    <tr>
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        Monkey
      </td>
    </tr>
    
    <tr>
      <td>
        Ninja
      </td>
    </tr>
    
    <tr>
      <td>
        Spaghetti
      </td>
    </tr>
    
    <tr>
      <td>
        Rutabaga
      </td>
    </tr>
    
    <tr>
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        Darth Vade
      </td>
    </tr>
    
    <tr>
      <td>
        Ninja
      </td>
    </tr>
  </table>
</div>

<p>全部列出来</p>

<p>(3)注意:</p>

<div>
  SELECT * FROM TableA <strong>UNION </strong>SELECT * FROM TableB
</div>

<div>
  <table width="170" border="0" cellspacing="0" cellpadding="0">
    <colgroup> <col span="2" width="85" /></colgroup> <tr>
      <td colspan="2" width="170">
        新结果集
      </td>
    </tr>
    
    <tr>
      <td>
        id
      </td>
      
      <td>
        name
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Monkey
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Spaghetti
      </td>
    </tr>
    
    <tr>
      <td>
        1
      </td>
      
      <td>
        Rutabaga
      </td>
    </tr>
    
    <tr>
      <td>
        2
      </td>
      
      <td>
        Pirate
      </td>
    </tr>
    
    <tr>
      <td>
        3
      </td>
      
      <td>
        Darth Vade
      </td>
    </tr>
    
    <tr>
      <td>
        4
      </td>
      
      <td>
        Ninja
      </td>
    </tr>
  </table>
</div>

<p>由于 id 1 Pirate   与 id 2 Pirate 并不相同，不合并</p>

<p>还需要注册的是我们还有一个是“交差集” cross join, 这种Join没有办法用文式图表示，因为其就是把表A和表B的数据进行一个N*M的组合，即笛卡尔积。表达式如下：SELECT * FROM TableA CROSS JOIN TableB</p>

<p>这个笛卡尔乘积会产生 4 x 4 = 16 条记录，一般来说，我们很少用到这个语法。但是我们得小心，如果不是使用嵌套的select语句，一般系统都会产生笛卡尔乘积然再做过滤。这是对于性能来说是非常危险的，尤其是表很大的时候。</p>

<p>(原文地址：<a href="http://blog.diyiye.com/?post=10" target="_blank" rel="nofollow"><a href="http://blog.diyiye.com/?post=10">http://blog.diyiye.com/?post=10</a></a>)</p>
</div>


    </main>

    
  </body>
</html>
