<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.55.6" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PC版网页自动识别手机客户端并跳转 &middot; 小谈博客</title>

  
  <link type="text/css" rel="stylesheet" href="http://tanteng.me/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://tanteng.me/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://tanteng.me/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://tanteng.me/css/hyde.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://tanteng.me/"><h1>小谈博客</h1></a>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="http://tanteng.me/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2019. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>PC版网页自动识别手机客户端并跳转</h1>
  <time datetime=2015-01-18T15:23:15Z class="post-date">Sun, Jan 18, 2015</time>
  <p>PC版网页自动识别手机客户端并跳转，用js进行判断是否手机客户端进行跳转最好，特别是静态网页，把这个过程通过js的方式放在用户客户端执行，可以大大减少服务器端额外处理的压力。但是有时需要通过在服务器端进行判断的情况除外。</p>

<p>以腾讯网适配js函数为例：</p>

<pre class="lang:js decode:true ">&lt;script&gt;
(function(){
        /*
          腾讯网适配跳转
        */
        var reWriteUrl = function(url){
            if(url){
                if(url.indexOf("/a/")&gt;0 ){
                    var Splits = url.split("/"),siteName=Splits[2].split("qq.com")[0].split(".").length==3?siteName=Splits[2].split("qq.com")[0].split(".")[0]+"_"+Splits[2].split("qq.com")[0].split(".")[1]:siteName=Splits[2].split("qq.com")[0].split(".")[0],aids=url.split("/a/")[1].split(".htm")[0].replace(/[^0-9]/g, ""),site="";
                    if(typeof siteName!=="undefined" && typeof aids!=="undefined"){
                        if(siteName.split(".").length&gt;2){
                            var len = siteName.split(".").length;
                            for(var i=0;i&lt;len;i++){
                                    site+=siteName.split(".")[i];
                                    if(i&lt;len-2){
                                        site+="_";
                                    }
                            }
                        }else{
                            site=siteName.split(".")[0];
                        }
                        return "http://xw.qq.com/"+siteName+"/"+aids;
                    }
                }
            }
        };
        var goToMobile = function(){
                var Aarry = document.getElementsByTagName("a"),TmpArray=[];
                for(var i=0;i&lt;Aarry.length;i++){
                    TmpArray[i]=Aarry[i].href.toString();
                    if(TmpArray[i].split("/")[3]=="a"){
                        Aarry[i].href=reWriteUrl(TmpArray[i]);
                    }
                }
                
        }
        var mobileSietList={news:"news",photo:"photo",video:"video",view:"huati",finance:"finance",ent:"ent",sports:"sports",digi:"digi",mil:"mil",lady:"lady",auto:"auto",games:"games",house:"house",astro:"astro",cul:"cul",fashion:"fashion","2014":"shijiebei"};
        
        if(/Android|webOS|iPhone|Windows Phone|iPod|BlackBerry|SymbianOS/i.test(navigator.userAgent)){
            /*底层页跳转*/
            var url=window.location.href;
            var pathname=window.location.pathname;
            if(url.indexOf("/a/")&gt;0 && window.location.hostname!="www.nanjing2014.org"){
                if(url.indexOf("?pc")&lt;0){
                try{
                    window.location.href=reWriteUrl(url);
                }catch(e){}
                }
            }else{ // 频道首页跳转
                if(url.indexOf("?mobile")&lt;0){
                    var mobileUrl=window.location.hostname.split(".")[0];
                    if(/news|pp|video|view|finance|ent|sports|digi|mil|fashion|auto|games|house|astro|cul|2014/i.test(mobileUrl)){
                        try{
                            window.location.href='http://xw.qq.com/m/'+mobileSietList[mobileUrl]+'/index.htm';
                        }catch(e){  
                        }
                    }
                }
            }
            try{
                //document.addEventListener('DOMContentLoaded', goToMobile, false);
            }catch(e){  
            }
        }
})();

&lt;/script&gt;</pre>

<p>以上函数取自腾讯网的js适配跳转，可以参考它的逻辑根据自己网站的情况实现这个过程。</p>
</div>


    </main>

    
  </body>
</html>
