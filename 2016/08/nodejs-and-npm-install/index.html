<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Node.js 和 npm 卸载安装笔记 &middot; TonyTan</title>

  
  <link rel="stylesheet" href="http://tanteng.me/css/poole.css">
  <link rel="stylesheet" href="http://tanteng.me/css/hyde.css">
  <link rel="stylesheet" href="http://tanteng.me/css/poole-overrides.css">
  <link rel="stylesheet" href="http://tanteng.me/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://tanteng.me/css/hyde-x.css">
  <link rel="stylesheet" href="http://tanteng.me/css/highlight/sunburst.css">
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://tanteng.me/touch-icon-144-precomposed.png">
  <link href="http://tanteng.me/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="Your default page description">
  <meta name="keywords" content="your,default,page,keywords">
  
</head>
<body class="theme-base-0d">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://tanteng.me/"><h1>小谈博客</h1></a>
      <p class="lead">
       一个专注WEB技术的博客 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="http://tanteng.me/">Blog</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/tanteng"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/in/tanteng"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://www.instagram.com/tanteng1031"><i class="fa fa-instagram fa-3x"></i></a>
      <a href="https://www.facebook.com/tanteng001"><i class="fa fa-facebook-square fa-3x"></i></a>
      
      
      
      </li>
    </ul>

    

    <p>Copyright &copy; 2019 <a href="http://tanteng.me/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Node.js 和 npm 卸载安装笔记</h1>
    <span class="post-date">Aug 12, 2016 &middot; 1 minute read
    
    <br/>
    <a class="label" href="http://tanteng.me/categories/develop">Develop</a><a class="label" href="http://tanteng.me/categories/%E5%89%8D%E7%AB%AF">前端</a>
    </span>
    <p>为了学 Vue.js，用 npm 装了 Vue，经过我的折腾，npm 被我玩坏了，干脆连 Node.js 也重新装一个，下面记录一下在本地 Windwos 环境用 vagrant 搭建的虚拟机（Homestaead）和生产环境阿里云 CentOS 系统安装 Node.js 的步骤，以及 npm 安装依赖的不同之处。</p>

<p>使用源码编译的方式安装 node.js.首先将机子上的 Node.js 卸载，我直接贴上 Stack Overflow 上提供的步骤：</p>

<h3 id="1-卸载-npm-和-node-js">1.卸载 npm 和 Node.js</h3>

<p>先卸载 npm，命令是：<span class="comment-copy">sudo npm uninstall npm -g，然后卸载 Node.js.<br /> </span></p>

<p>Running <code>which node</code> will return something like <code>/path/bin/node</code>.</p>

<p>Then run <code>cd /path</code></p>

<p>This is all that is added by Node.JS.</p>

<pre class="lang:php decode:true">rm -r bin/node bin/node-waf include/node lib/node lib/pkgconfig/nodejs.pc share/man/man1/node.1</pre>

<p>如果是 Ubuntu 系统并使用 apt-get 安装的，可以使用命令：</p>

<pre class="lang:php decode:true ">sudo apt-get remove nodejs</pre>

<h3 id="2-下载-编译-安装-node-js">2.下载、编译、安装 Node.js</h3>

<p>Node.js 官方下载页面：<a href="https://nodejs.org/en/download/current/" target="_blank" rel="nofollow"><a href="https://nodejs.org/en/download/current/">https://nodejs.org/en/download/current/</a></a></p>

<p>我选择的是最新版本，下载地址是：<a href="https://nodejs.org/dist/v6.3.1/node-v6.3.1.tar.gz" target="_blank" rel="nofollow"><a href="https://nodejs.org/dist/v6.3.1/node-v6.3.1.tar.gz">https://nodejs.org/dist/v6.3.1/node-v6.3.1.tar.gz</a></a></p>

<p>一般第三方的软件在 Linux 上的安装目录是 /usr/local,使用 wget 下载源码（地址自己注意替换）：</p>

<pre class="lang:php decode:true">sudo wget http://nodejs.org/dist/v0.10.30/node-v0.10.30.tar.gz</pre>

<p>解压缩：</p>

<pre class="lang:php decode:true ">tar xzvf node-v* && cd node-v*</pre>

<p>编译：</p>

<pre class="lang:php decode:true ">./configure
make</pre>

<p>这个过程可能会很慢，等待完成，然后安装：</p>

<pre class="lang:php decode:true">sudo make install</pre>

<p>如果一切顺利，Node.js 就安装好了，使用 node -v 查看一下版本。</p>

<pre class="lang:php decode:true ">vagrant@homestead:/usr/local$ node -v
v6.3.1</pre>

<h3 id="3-安装-npm-依赖">3.安装 npm 依赖</h3>

<p>这里 Windows 上的虚拟机和真实的 Linux 系统会有不同，Linux 上直接：</p>

<pre class="lang:php decode:true ">npm install</pre>

<p>而 Windows 虚拟机的命令需要加参数，否则会报错：</p>

<pre class="lang:php decode:true">npm install --no-bin-links</pre>

<h3 id="4-安装淘宝-npm-镜像加速">4.安装淘宝 npm 镜像加速</h3>

<p>其实第三步之前可以先安装淘宝的 npm 镜像，使用命令：</p>

<pre class="lang:php decode:true ">npm install -g cnpm --registry=https://registry.npm.taobao.org</pre>

<p>这样大部分 npm 命令可以用 cnpm 替代，如：</p>

<pre class="lang:php decode:true ">cnpm install</pre>

<p>淘宝 npm 镜像主页：<a href="https://npm.taobao.org/" target="_blank" rel="nofollow"><a href="https://npm.taobao.org/">https://npm.taobao.org/</a></a></p>

<p>由于我使用 Laravel 的 PHP 框架，需要使用 gulp 前端构建工具，因此要安装 gulp，使用淘宝 npm 镜像安装：</p>

<pre class="lang:php decode:true">cnpm install --global gulp</pre>

<p>到此 Node.js 和 npm 依赖都安装成功，一切如新。</p>

<p>还有一种方法，不安装 cnpm 只用淘宝镜像，设置 npm 的镜像：</p>

<pre class="lang:php decode:true ">npm config set registry "https://registry.npm.taobao.org"</pre>

<p>（本文小谈博客原创，转载请注明出处：<a href="https://blog.tanteng.me/2016/08/nodejs-and-npm-install/" target="_blank"><a href="https://blog.tanteng.me/2016/08/nodejs-and-npm-install/">https://blog.tanteng.me/2016/08/nodejs-and-npm-install/</a></a>）</p>
  </div>
  
</div>




<script src="http://tanteng.me/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

