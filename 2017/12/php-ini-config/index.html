<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.55.6" />

    
    
    

<title>php.ini 几个配置项说明 • 小谈博客</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="php.ini 几个配置项说明"/>
<meta name="twitter:description" content="php.ini 几个常用的配置项整理。

max_execution_time

; Maximum execution time of each script, in seconds
; http://php.net/max-execution-time
; Note: This directive is hardcoded to 0 for the CLI SAPI
max_execution_time = 80

这设置了脚本被解析器中止之前允许的最大执行时间，单位秒。 这有助于防止写得不好的脚本占尽服务器资源。 默认设置为 30。 从命令行运行 PHP 时，默认设置为 0。"/>

<meta property="og:title" content="php.ini 几个配置项说明" />
<meta property="og:description" content="php.ini 几个常用的配置项整理。

max_execution_time

; Maximum execution time of each script, in seconds
; http://php.net/max-execution-time
; Note: This directive is hardcoded to 0 for the CLI SAPI
max_execution_time = 80

这设置了脚本被解析器中止之前允许的最大执行时间，单位秒。 这有助于防止写得不好的脚本占尽服务器资源。 默认设置为 30。 从命令行运行 PHP 时，默认设置为 0。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://tanteng.me/2017/12/php-ini-config/" />
<meta property="article:published_time" content="2017-12-04T03:56:10&#43;00:00"/>
<meta property="article:modified_time" content="2017-12-04T03:56:10&#43;00:00"/>


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.5908340ec0d0531feb30d45d7ab9a057fcd461f5bda26b1c817b70b1565424bb.css" integrity="sha256-WQg0DsDQUx/rMNRdermgV/zUYfW9omscgXtwsVZUJLs=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="http://tanteng.me/">小谈博客</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="http://tanteng.me/img/avatar.jpeg" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
         一个专注 WEB 技术的博客 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">小谈博客</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	
	<a href="https://facebook.com/tanteng001" rel="me"><i class="fab fa-facebook-f"></i></a>
	
	
	<a href="https://github.com/tanteng" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	<a href="https://instagram.com/tanteng1031" rel="me"><i class="fab fa-instagram fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://linkedin.com/in/tanteng" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2019 TonyTan
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>php.ini 几个配置项说明</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Dec 4, 2017
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/develop">DEVELOP</a>
              •
          
              <a class="badge badge-category" href="/categories/php">PHP</a>
              
          
      
    
    
    
    <br/>
    <i class="fas fa-clock"></i> 2 min read
</div>


  </header>
  
  
  <div class="post">
    <p>php.ini 几个常用的配置项整理。</p>

<h3 id="max-execution-time">max_execution_time</h3>

<p><code class="lang:default decode:true">; Maximum execution time of each script, in seconds
; <a href="http://php.net/max-execution-time">http://php.net/max-execution-time</a>
; Note: This directive is hardcoded to 0 for the CLI SAPI
max_execution_time = 80</code></p>

<p>这设置了脚本被解析器中止之前允许的最大执行时间，单位秒。 这有助于防止写得不好的脚本占尽服务器资源。 默认设置为 30。 从命令行运行 PHP 时，默认设置为 0。</p>

<p>最大执行时间不会影响系统调用和系统操作等。</p>

<h4 id="set-time-limit-和-max-execution-time-有什么区别">set_time_limit() 和 max_execution_time 有什么区别？</h4>

<p>看一段代码：</p>

<p><code class="lang:php decode:true ">/* {{{ proto bool set_time_limit(int seconds)
   Sets the maximum time a script can run */
PHP_FUNCTION(set_time_limit)
{
    zend_long new_timeout;
    char *new_timeout_str;
    int new_timeout_strlen;
    zend_string *key;</p>

<pre><code>if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, &quot;l&quot;, &amp;new_timeout) == FAILURE) {
    return;
}

new_timeout_strlen = zend_spprintf(&amp;new_timeout_str, 0, ZEND_LONG_FMT, new_timeout);

key = zend_string_init(&quot;max_execution_time&quot;, sizeof(&quot;max_execution_time&quot;)-1, 0);
if (zend_alter_ini_entry_chars_ex(key, new_timeout_str, new_timeout_strlen, PHP_INI_USER, PHP_INI_STAGE_RUNTIME, 0 TSRMLS_CC) == SUCCESS) {
    RETVAL_TRUE;
} else {
    RETVAL_FALSE;
}
zend_string_release(key);
efree(new_timeout_str);
</code></pre>

<p>}
/* }}} */</code></p>

<p>从这段代码可以看出，set_time_limit() 函数就是通过 ini_set() 调整 max_execution_time 这个配置项的值的。</p>

<h3 id="upload-max-filesize-和-post-max-size">upload_max_filesize 和 post_max_size</h3>

<h4 id="upload-max-filesize-配置">upload_max_filesize 配置</h4>

<p><code class="lang:default decode:true ">; Maximum allowed size for uploaded files.
; <a href="http://php.net/upload-max-filesize">http://php.net/upload-max-filesize</a>
upload_max_filesize = 20M</code></p>

<p>它是指比如一个表单中上传文件的大小。</p>

<h4 id="post-max-size-配置">post_max_size 配置</h4>

<p><code class="lang:default decode:true ">; Maximum size of POST data that PHP will accept.
; Its value may be 0 to disable the limit. It is ignored if POST data reading
; is disabled through enable_post_data_reading.
; <a href="http://php.net/post-max-size">http://php.net/post-max-size</a>
post_max_size = 200M</code></p>

<p>它是指一个 post 请求，以表单为例，表单各个字段（包含文件）的总大小。</p>

<p>这几个配置合理的值应该是 upload_max_filesize &lt; post_max_size &lt; memory_limit.</p>

<h3 id="error-reporting">error_reporting</h3>

<p><code class="lang:default decode:true ">; E_USER_WARNING    - user-generated warning message
; E_USER_NOTICE     - user-generated notice message
; E_DEPRECATED      - warn about code that will not work in future versions
;                     of PHP
; E_USER_DEPRECATED - user-generated deprecation warnings
;
; Common Values:
;   E_ALL (Show all errors, warnings and notices including coding standards.)
;   E_ALL &amp; ~E_NOTICE  (Show all errors, except for notices)
;   E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT  (Show all errors, except for notices and coding standards warnings.)
;   E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR  (Show only errors)
; Default Value: E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT &amp; ~E_DEPRECATED
; Development Value: E_ALL
; Production Value: E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT
; <a href="http://php.net/error-reporting">http://php.net/error-reporting</a>
error_reporting = E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT</code></p>

<p>设置错误级别。</p>

<p>常见设置；</p>

<p><code class="lang:php decode:true ">// 关闭所有PHP错误报告
error_reporting(0);</p>

<p>// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);</p>

<p>// 报告 E_NOTICE也挺好 (报告未初始化的变量
// 或者捕获变量名的错误拼写)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);</p>

<p>// 除了 E_NOTICE，报告其他所有错误
error_reporting(E_ALL ^ E_NOTICE);</p>

<p>// 报告所有 PHP 错误 (参见 changelog)
error_reporting(E_ALL);</p>

<p>// 报告所有 PHP 错误
error_reporting(-1);</p>

<p>// 和 error_reporting(E_ALL); 一样
ini_set(&lsquo;error_reporting&rsquo;, E_ALL);</code></p>

<p>&nbsp;</p>

<p><audio style="display: none;" controls="controls"></audio></p>

<p><audio style="display: none;" controls="controls"></audio></p>
  </div>
  

<div class="navigation navigation-single">
    
    <a href="/2017/11/mac-open-user-local/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Mac 上如何打开 /usr/local 路径的文件夹</span>
    </a>
    
    
    <a href="/2017/12/php-stream/" class="navigation-next">
      <span class="navigation-tittle">PHP 中“流”的概念</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

<script src="https://cdn.bootcss.com/font-awesome/5.5.0/js/all.min.js"></script>

    
    
        <script src="https://cdn.bootcss.com/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
